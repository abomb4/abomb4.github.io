---
layout: post
title:  "二叉树入门"
categories: 数据结构
date: +0800 2018-02-24 15:13:00
tag: 数据结构
---

* content
{:toc}

# 简介
--------------
二叉树是使用非常广泛的数据结构，在不同领域使用到不同变种的二叉树。

本篇的目标在说明二叉树的定义与应用场景，并用代码实现二叉树的基本操作。

复杂的树包括各种平衡二叉树等，不会在本篇中实现。

# 概念定义
二叉树是每个节点最多有两个子树的树结构。

相关概念：
- 节点的度：节点拥有的子树的数量
- 根节点：就是那个根
- 子节点：节点下面跟随的点
- 叶节点：没有儿子的孤苦伶仃节点
- 兄弟：同父节点
- 深度（高度）：根节点到最底层节点的层数
- 满二叉树（Full Binary Tree）：每个节点要么是叶结点（0 个子），要么同时具有左右子节点（2 个子）
- 完全二叉树（Complete Binary Tree）：每层节点都填满的二叉树；若最后一层不满，则之缺少右边的若干节点。
- 完美二叉树（Perfect Binary Tree）：每层节点都填满的二叉树
- 二叉查找树：任意节点的左节点值小于该值，右节点全部大于当前节点的二叉树

```
 +                          +-----------+
 |                          + Root node |
 |                          +-----------+
 |                                |
 |                +---------------+---------------+
 |                |                               |
 |         +-------------+                 +-------------+
 |         | Son of root |                 | Son of root |    （互为兄弟）
 |         +-------------+                 +-------------+
 |                |                               |
 |       +--------+--------+               +------+------+
 |       |                 |               |             |
 |  +----------+        +-----+       +----------+ +----------+
 |  | Leaf 123 |        | 234 |       | Leaf 345 | | Leaf 567 |
 |  +----------+        +-----+       +----------+ +----------+
 |                         |
 |                +--------+
 |                |
 |           +----------+
 |           | Leaf 124 |
 |           +----------+
 v 深度为 4
```

树形结构要实现：
- 查找指定数据
- 新增数据
- 修改数据（等同于删除再新增？）
- 删除数据
- 判断是否为空
- 前序遍历
- 中序遍历
- 后续遍历
- 按层次遍历

为了实用性，本篇目标是实现类似 HashMap 功能的 KV 存储树。
```rust
trait BinaryTree<K, V> {
    fn get<'a>(&'a self, key: K) -> Option<&'a V>;
    fn contains(&self, key: K) -> bool;
    fn insert(&mut self, key: K, value: V) -> Option<V>;
    fn delete(&mut self, key: K) -> Option<V>;
    fn is_empty(&self) -> bool;
    /** 先(前)序遍历，根左右 */
    fn iterate_first_mut(&mut self, runner: &dyn Fn(K, &mut V));
    /** 中序遍历，左根右 */
    fn iterate_middle_mut(&mut self, runner: &dyn Fn(K, &mut V));
    /** 后序遍历，左右根 */
    fn iterate_last_mut(&mut self, runner: &dyn Fn(K, &mut V));
    /** 按层次遍历 */
    fn iterate_layer_mut(&mut self, runner: &dyn Fn(K, &mut V));
}
```

# 特种树
没有任何特殊性质的二叉树是没什么价值的，用途最广泛的树是二叉搜索树及其衍生树种。

## 二叉搜索树
二叉搜索树是指一棵空树或者具有下列性质的二叉树：
1. 若任意节点的左子树不空，则左子树上所有节点的值均小于它的根节点的值；
2. 若任意节点的右子树不空，则右子树上所有节点的值均大于它的根节点的值；
3. 任意节点的左、右子树也分别为二叉查找树；
4. 没有键值相等的节点。

二叉搜索树的搜索与插入时间复杂度为 O(log n) ，
但普通的二叉搜索树可能会退化成链表，导致效率变回 O(n)。

### 关键操作逻辑

**插入**：
1. 先搜索要插入的数据
2. 若存在，则覆盖
3. 若不存在，记录最后寻找的节点，比他大放左边，比他小放右边

**搜索**：

**删除**：

**前序遍历**：

**中序遍历**：

**后序遍历**：


### 代码实现

## 堆

# 操作

# 应用
